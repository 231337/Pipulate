<html>
  <head>
    <title>Pipulate Free and Open Source (FOSS) SEO Software</title>
    <meta name="description" content="Pipulate Collects Data directly into Spreadsheets for SEO and Social Media monitoring.">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <link rel="shortcut icon" href="{{ url_for('static', filename='favicon.ico') }}">
    <link href='http://fonts.googleapis.com/css?family=Paytone+One' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Nunito:300' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="//cdn.jsdelivr.net/picnicss/4.0.0/picnic.min.css">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/picnicss/4.0.0/plugins.min.css">
    <link rel="stylesheet" href="./static/css/mikelevin.css">
    <link rel="stylesheet" href="./static/css/animation.css"><!--[if IE 7]><link rel="stylesheet" href="css/mikelevin-ie7.css"><![endif]-->
    <style>
    @font-face {
      font-family: 'mikelevin';
      src: url('./font/mikelevin.eot?73762107');
      src: url('./font/mikelevin.eot?73762107#iefix') format('embedded-opentype'),
           url('./font/mikelevin.woff?73762107') format('woff'),
           url('./font/mikelevin.ttf?73762107') format('truetype'),
           url('./font/mikelevin.svg?73762107#mikelevin') format('svg');
      font-weight: normal;
      font-style: normal;
    }
    body {
      font-family: Nunito;
      font-size: 14px;
      color: #333;
      width: 100%;
      height: 100%;
      overflow: hidden;
    }
    .pip {
      font-family: Paytone One;
    }
    #wrapper {
      position: relative;
      height: 100%;
    }
    #content{
      background-color: #000;
      position: relative;
      margin: 0 auto;
      padding-left: 5px;
      padding-right: 5px;
      padding-top: 60px;
      text-align:center;
      min-height: 100%
    }
    #pipstream{
      border: 2px solid lightgrey;
      height: 250px;
      overflow: auto;
      background-color: white;
      margin-bottom: 15px;
      margin-left:15px;
      margin-right:15px;
      padding-top: 5px;
      padding-bottom: 5px;
      padding-left: 5px;
      text-align: left;
      line-height: 1.4em;
    }
    .pl {
      font-size: .9em;
    }
    nav{
      background-color:#EEEEEE;
    }
    #magicdiv{
      margin-top: 15px;
      margin-bottom: 6px;
      margin-left: 15px;
      margin-right: 14px;
      text-align:center;
    }
    #learnsomething{
      font-size: 12px;
      background-color: lightgrey;
      margin-bottom: 0px;
      margin-left: auto;
      margin-right: auto;
      margin-bottom: 0px;
      line-height: 2.7;
      width: 100%;
      height: 30px;
    }
    #magicbox{
      -webkit-border-radius:0px;
      border-radius:0px;
      border: 2px solid lightgrey;
      margin-top: 0px;
      margin-left: auto;
      margin-right:auto;
      width: 100%;
      -webkit-box-sizing: border-box; /* Safari/Chrome, other WebKit */
      -moz-box-sizing: border-box;    /* Firefox, other Gecko */
      box-sizing: border-box;         /* Opera/IE 8+ */
    }
    #pipulate{
      font-family:Paytone One
    }
    #paste{
      margin-bottom:10px;
      width: 95%;
      white-space:nowrap;
      margin-left: auto;
      margin-right: auto;
      padding-right: 75px;
    }
    #pastelabel{
      white-space:nowrap;
      font-size: 1.3em;
      text-align: right;
      color: white;
    }
    .spinner {
      margin-top: 40px;
      margin-left: auto;
      margin-right:auto;
      width: 70px;
      position: absolute;
      line-height: 6.5;
      left: 0;
      right: 0;
    }
    .spinner > div {
      width: 18px;
      height: 18px;
      background-color: #C6C6C6;
      border-radius: 100%;
      display: inline-block;
      -webkit-animation: bouncedelay 1.4s infinite ease-in-out;
      animation: bouncedelay 1.4s infinite ease-in-out;
      /* Prevent first frame from flickering when animation starts */
      -webkit-animation-fill-mode: both;
      animation-fill-mode: both;
    }
    .spinner .bounce1 {
      -webkit-animation-delay: -0.32s;
      animation-delay: -0.32s;
    }
    .spinner .bounce2 {
      -webkit-animation-delay: -0.16s;
      animation-delay: -0.16s;
    }
    @-webkit-keyframes bouncedelay {
      0%, 80%, 100% { -webkit-transform: scale(0.0) }
      40% { -webkit-transform: scale(1.0) }
    }
    @keyframes bouncedelay {
      0%, 80%, 100% { 
        transform: scale(0.0);
        -webkit-transform: scale(0.0);
      } 40% { 
        transform: scale(1.0);
        -webkit-transform: scale(1.0);
      }
    }
    #arrow{
      font-weight: bold;
      font-size: 1.8em;
      color: #323232;
      position : relative;
      top:.2em;
    }
    #dragdiv{
      font-size: 1em;
      top:.1em;
      white-space: nowrap;
      float: left;
      margin-top: 10px;
    }
    #piplogo {
      max-width: 380px;
      position: relative;
      top: 40%;
      transform: translateY(-50%);
    }
    .bookmarklet{padding: 0px;}
    .pressthis{
      margin:5px 2px 8px 5px;
      float: left;
      }
    .pressthis a,.pressthis a:active,.pressthis a:focus,.pressthis a:hover{
      padding:3px;
      display:inline-block;
      position:relative;cursor:
      move;color:#333;
      background:#e6e6e6;
      -webkit-border-radius:5px;
      border-radius:5px;
      border:1px solid #b4b4b4;
      font-family:Paytone One;
      font-size:16px;
      text-decoration:none}
    .pressthis a:active{
      outline:0}
    .pressthis a:hover:after{
      -webkit-transform:skew(20deg) rotate(9deg);
      -ms-transform:skew(20deg) rotate(9deg);
      transform:skew(20deg) rotate(9deg);
      -webkit-box-shadow:0 10px 8px rgba(0,0,0,.7);
      box-shadow:0 10px 8px rgba(0,0,0,.7)}
    .pressthis a span{
      display:inline-block;
      margin-left:25px;
      margin-right:26px;
      }
    .pressthis a span:
      before{color:#777;
      font:400 20px/1 ;
      position:relative;
      display:inline-block;
      top:4px;
      margin-right:4px}
    .pressthis a:after{
      content:'';
      width:70%;
      height:55%;
      z-index:-1;
      position:absolute;
      right:10px;
      bottom:9px;
      background:0 0;
      -webkit-transform:skew(20deg) rotate(6deg);
      -ms-transform:skew(20deg) rotate(6deg);
      transform:skew(20deg) rotate(6deg);
      -webkit-box-shadow:0 10px 8px rgba(0,0,0,.6);
      box-shadow:0 10px 8px rgba(0,0,0,.6)}

    .pip-icon
    {
      font-family: "mikelevin";
      font-style: normal;
      font-weight: normal;
      speak: none;
     
      display: inline-block;
      text-decoration: inherit;
      width: 1em;
      margin-right: 1em;
      text-align: center;
      /* opacity: .8; */
     
      /* For safety - reset parent styles, that can break glyph codes*/
      font-variant: normal;
      text-transform: none;
     
      /* fix buttons height, for twitter bootstrap */
      line-height: 1em;
     
      /* Animation center compensation - margins should be symmetric */
      /* remove if not needed */
      margin-left: .2em;
     
      /* You can be more comfortable with increased icons size */
      /* font-size: 120%; */
     
      /* Font smoothing. That was taken from TWBS */
      -webkit-font-smoothing: antialiased;
      -webkit-transform-origin: 69% 50%;
      -moz-osx-font-smoothing: grayscale;
     
      /* Uncomment for 3D effect */
      /* text-shadow: 1px 1px 1px rgba(127, 127, 127, 0.3); */
    }
    .pipmenu {
      font-size: 13px;
      background-color:#DDDDDD;
      width: 200px;
      height: 2.1em;
      padding-top: 1px;
    }
    #piphelp {
      position:absolute;
      right: 3em;
      margin-top:14px;
      font-size: 1.2em;
      color: black;
    }
    @media (max-width: 500px) {
      #learnsomething {
        font-size: 10px;
        height: 24px;
      }
      #dragspan {
        display: none;
      }
      #dragdiv {
        margin-top: 12px;
      }
    }
    @media (max-width: 1140px) and (min-width: 960px) {
      #dragdiv {
        display: none;
      }
    }
    @media (min-width: 960px) {
      #pastelabel{
        width:4em;
      }
      #paste{
        width: 97%;
        margin-left: auto;
        margin-right: auto;
        margin-top:50px;
      }
      #piphelp{
        display: none;
      }
    }
    </style>

    <script>
      $(document).ready(function(){  
        {%- if request.method == 'GET': -%}
          if ($("#magicbox").val()) {
            $('#magicbox').css('background-color', 'yellow');
            $("#learnsomething").html('Put commas between separate keywords, then Select <b>Collect Keywords!</b>');
          }
        {%- endif -%}
        $( "#options" ).bind( "change", function() {
          readytogo();
        });
        $("#pipulate").click(function() {
          lockbutton();
          $('#pipstream').html('');
          $('#spinner').show();
          $('#learnsomething').html("Sit back and relax. I'm starting to Pipulate...");
          $('#pipform').submit();
        });
        {% if request.method == 'GET': %}
          $("#spinner").hide();
        {% elif form.pipurl.data == '': %}
          $("#spinner").hide();
          unlockbutton();
          $("#learnsomething").html('Copy and paste a URL into field (even on mobile).');
        {% endif %}
      });
      function redlock() {
        $('#piplock').css('color', 'red');
      }
      function whitelock() {
        $('#piplock').css('color', 'white');
      }
      function yellowlock() {
        $('#pipulate').prop("disabled", true);
        $('#pipulate').css('color', 'red');
        $('#piplock').removeClass("pip-angle-circled-right");
        $('#piplock').addClass("pip-stopsign");
      }
      function readytogo() {
        if ($( "#options option:selected" ).val() == 'off') {
          yellowlock();
        } else {
          $('#pipulate').prop("disabled", false);
          $('#pipulate').css('color', 'white');
          $('#piplock').removeClass("pip-attention");
          $('#piplock').addClass("pip-angle-circled-right");
        }
      }
      function lockbutton() {
        $('#pipulate').css("opacity", .5);
        $('#pipulate').prop("disabled", true);
        $('#piplock').removeClass("pip-angle-circled-right");
        $('#piplock').addClass("pip-lock");
      }
      function unlockbutton() {
        whitelock();
        $('#pipulate').prop("disabled", false);
        $('#pipulate').fadeTo(0,1);
        $('#piplock').addClass("pip-angle-circled-right");
        $('#piplock').removeClass("pip-lock");
      }
      if (location.hash) {
        var myhash = location.hash
        if (myhash.indexOf('access_token') > 0) {
          myhash = myhash.substring(1, myhash.length);
          window.location = "http://{{ request.headers['Host'] }}?" + myhash;
        }
      }
    </script>
  </head>
  <body>
    <div id="wrapper">
    <nav>
    <!-- responsive -->
    <input id="bmenu" type="checkbox" class="show">
    <label for="bmenu" class="burger"><i class="pip-icon pip-menu"></i></label>
    <div class="pressthis" style="text-align: center"><a class="bookmarklet" href="{{ bookmarklet }}" onclick="return false;" oncontextmenu="if(window.navigator.userAgent.indexOf('WebKit')!=-1||window.navigator.userAgent.indexOf('MSIE')!=-1){jQuery('.pressthis-code').show().find('textarea').focus().select();return false;}"><span>{{ blabel }}</span></a></div>
    <div id="dragdiv"> <img src="./static/foss-seo.png" style="vertical-align: middle;"/><span id="dragspan"> Drag to Boomarks Bar.</span></div>
    <a id="piphelp" class="pip-help-circled" href="./static/help.html"></a>
    <div class="menu">
      <a class="button pseudo pip-play" target="_blank" href="https://docs.google.com/presentation/d/10lr_d1uyLMOnWsMzbenKiPlFE5-BIt9bxVucw7O4GSI/edit?usp=sharing">Intro &amp; Philosophy</a>
      <a class="button pseudo pip-github-1" target="_blank" href="https://github.com/miklevin/pipulate/blob/master/README.md">Documentation</a>
      <a class="button pseudo pip-youtube-play" target="_blank" href="https://www.youtube.com/playlist?list=PLy-AlqZFg6G_bo5bH_wLBdxx-TNfB_yXT">Video Tutorials</a>
      <a class="button pseudo pip-mikelevin-fatcircle" target="_blank" href="http://levinux.com">Levinux</a>
      {% if session and 'loggedin' in session and session['loggedin'] == '1': %}
        <a class="button pip-block" href="{{ logoutlink }}">Logout</a>
      {% else %}
        <a class="button pip-googleplus" href="{{ loginlink }}">Login</a>
      {% endif %}
    </div>
    </nav>
    <div id="content">
      {% if select: %}
        {% if session and 'loggedin' in session and session['loggedin'] == '1': %}
          <form id="pipform" method="POST" action="/">
            <div id="centerme">
            <div id="paste" class="row"><span id="pastelabel">URL: </span>{{ form.pipurl(size=80) }}</div>
            </div>
            <div>
            <select class="select pipmenu" id="options" name="options">{{ select|safe }}</select>
            <button id="pipulate" class="button" type="submit">
              Pipulate &nbsp;<i id="piplock" class="pip-angle-circled-right"></i>
            </button>
            </div>
            {% if request.method == 'POST': %}
              <script>
                lockbutton();
              </script>
            {% else %}
              <script>
                yellowlock();
              </script>
            {% endif %}
            <div id="magicdiv">
              <div id="spinner" class="spinner">
                <div class="bounce1"></div>
                <div class="bounce2"></div>
                <div class="bounce3"></div>
              </div>
              {% if request.method == 'POST': %}
                <div id="learnsomething">First, we connect to Google Docs...</div>
              {% else %}
                <div id="learnsomething">{{ cyclemotto }}</div>
              {% endif %}
              {{ form.magicbox(cols="60", rows="4") }}
            </div>
          </form>
          <div id="pipstream">
          {% with messages = get_flashed_messages() %}
            {% if messages %}
              {% for message in messages %}
                {%- if loop.index > 1: -%}<br/>{%- endif -%}<span class="pl"><i class="pip-circle-thin"></i> {{ message }}</span>
              {% endfor %}
            {% endif %}
          {% endwith %}
          {% for lineitem, learn, magic, glock in data: -%}
            {%- if glock == '+' : -%}
              <script>
                redlock();
              </script>
            {%- elif glock == '-': -%}
              <script>
                whitelock();
              </script>
            {%- endif -%}
            {%- if learn or magic: -%}
            <script>
              {%- if magic: -%}
                var pjson = {{ magic|safe }};
                //$("#magicbox").val(JSON.stringify(pjson, null, '\t'));
                $("#magicbox").val(JSON.stringify(pjson));
              {%- endif -%}
              {%- if learn: -%}$("#learnsomething").html('{{ learn }}');{%- endif -%}
            </script>
            {%- endif -%}
            {%- if lineitem -%}
              {%- if lineitem == "spinon" -%}
                <script>
                  // Lock button and display spinner
                  $('#pipulate').prop("disabled", true);
                  $('#pipulate').fadeTo("fast",.5);
                </script>
              {%- elif lineitem == "spinoffsuccess" -%}
                <script>
                  // Unlock button and remove spinner, successful pipulation
                  $('#spinner').hide();
                  $("i").removeClass("pip-circle-notch animate-spin");
                  $("i").addClass("pip-ok");
                  document.write('<img id="pbjt" src="./static/pipulate.gif" style="vertical-align: top;">');
                  unlockbutton();
                </script>
              {%- elif lineitem == "spinoff" -%}
                <script>
                  // Unlock button and remove spinner, failed pipulation
                  $('#spinner').hide();
                  $("i").removeClass("pip-circle-notch animate-spin");
                  $("i").addClass("pip-ok");
                  unlockbutton();
                </script>
              {%- elif lineitem == "spinerr" -%}
                <script>
                  // Unlock button and gracefully show user things are fubar.
                  $('#spinner').hide();
                  $("i").removeClass("pip-circle-notch animate-spin");
                  $("i.bullet").addClass("pip-circle-thin");
                  unlockbutton();
                </script>
              {%- elif lineitem[:1] == ',' -%}
                <span class="pl">{{ lineitem }}</span>
              {%- else -%}
                <script>
                  $("i").removeClass("pip-circle-notch animate-spin");
                  $("i").addClass("pip-ok");
                </script>
                {%- if loop.index > 1: -%}<br/>{%- endif -%}<span class="pl"><i class="bullet pip-icon pip-circle-notch animate-spin"></i> {{ lineitem|safe }}</span>
              {%- endif -%}
              <script>
                $("#pipstream").scrollTop($("#pipstream")[0].scrollHeight);
              </script>
            {%- endif -%}
          {%- endfor -%}
        {% else: %}
          <a class="button pip" href="{{ loginlink }}">LOGIN... &nbsp;<i id="piplock" class="pip-icon pip-googleplus"></i></a>
          <div style="height: 100%"><img id="piplogo" alt="Pipulate Free and Open Source SEO Software" src="static/pipulate-logo-white-transparent.png" /></div>
        {% endif %}
        </div>
      </div>
      {% else: %}
        <h1>Harsh</h1>
      {% endif %}
    </div>
  </body>
</html>
